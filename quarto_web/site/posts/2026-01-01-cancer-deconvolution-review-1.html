<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.30">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2026-01-01">
<meta name="description" content="An interview-style Q&amp;A on a cancer transcriptomic deconvolution review: why tumors break assumptions, what benchmarks are missing, and what to build next.">

<title>Community News: A cancer deconvolution review—bridging single-cell and bulk RNA-seq</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-de070a7b0ab54f8780927367ac907214.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-c1fac2584b48ed01fb6e278e36375074.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-this-review-now" id="toc-why-this-review-now" class="nav-link active" data-scroll-target="#why-this-review-now">Why this review now</a></li>
  <li><a href="#interview-style-qa" id="toc-interview-style-qa" class="nav-link" data-scroll-target="#interview-style-qa">Interview-style Q&amp;A</a>
  <ul>
  <li><a href="#background-significance" id="toc-background-significance" class="nav-link" data-scroll-target="#background-significance">1) Background &amp; significance</a></li>
  <li><a href="#what-reviewers-and-peers-valued" id="toc-what-reviewers-and-peers-valued" class="nav-link" data-scroll-target="#what-reviewers-and-peers-valued">2) What reviewers and peers valued</a></li>
  <li><a href="#how-this-may-shape-research-and-clinical-practice" id="toc-how-this-may-shape-research-and-clinical-practice" class="nav-link" data-scroll-target="#how-this-may-shape-research-and-clinical-practice">3) How this may shape research and clinical practice</a></li>
  <li><a href="#how-the-review-was-built" id="toc-how-the-review-was-built" class="nav-link" data-scroll-target="#how-the-review-was-built">4) How the review was built</a></li>
  <li><a href="#memorable-turning-points" id="toc-memorable-turning-points" class="nav-link" data-scroll-target="#memorable-turning-points">5) Memorable turning points</a></li>
  <li><a href="#whats-next" id="toc-whats-next" class="nav-link" data-scroll-target="#whats-next">6) What’s next</a></li>
  <li><a href="#where-biostatistics-fits-in-the-ai-era" id="toc-where-biostatistics-fits-in-the-ai-era" class="nav-link" data-scroll-target="#where-biostatistics-fits-in-the-ai-era">7) Where biostatistics fits in the AI era</a></li>
  <li><a href="#final-takeaway" id="toc-final-takeaway" class="nav-link" data-scroll-target="#final-takeaway">8) Final takeaway</a></li>
  </ul></li>
  <li><a href="#photo" id="toc-photo" class="nav-link" data-scroll-target="#photo">Photo</a></li>
  <li><a href="#author-biographies" id="toc-author-biographies" class="nav-link" data-scroll-target="#author-biographies">Author biographies</a></li>
  <li><a href="#how-to-cite-fill-in" id="toc-how-to-cite-fill-in" class="nav-link" data-scroll-target="#how-to-cite-fill-in">How to cite (fill in)</a></li>
  <li><a href="#share" id="toc-share" class="nav-link" data-scroll-target="#share">Share</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Community News: A cancer deconvolution review—bridging single-cell and bulk RNA-seq</h1>
<p class="subtitle lead">What’s changing in cancer transcriptomics, what’s still missing, and where the field is heading next</p>
  <div class="quarto-categories">
    <div class="quarto-category">Interviews</div>
  </div>
  </div>

<div>
  <div class="description">
    An interview-style Q&amp;A on a cancer transcriptomic deconvolution review: why tumors break assumptions, what benchmarks are missing, and what to build next.
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 1, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<!--
REQUIRED ASSETS (place in this post folder):
- cover.jpg    (landscape photo, deep background recommended)
- wang-dai.jpg (photo: Dr. Wenyi Wang (left) and Yaoyi Dai (right))
-->
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cover.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Cover image"></p>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
TL;DR
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Cancer deconvolution is about <strong>connecting single-cell resolution to bulk clinical cohorts</strong>—but tumors often violate “healthy tissue” assumptions.</li>
<li>The biggest open challenge is the <strong>“missing reference” problem</strong>: tumor states are dynamic, not fixed.</li>
<li>The review argues we need <strong>tumor-tissue benchmarking</strong>, <strong>FFPE-ready pipelines</strong>, and <strong>spatial / multimodal</strong> extensions to move from methods to clinical impact.</li>
</ul>
</div>
</div>
<section id="why-this-review-now" class="level2">
<h2 class="anchored" data-anchor-id="why-this-review-now">Why this review now</h2>
<p>Single-cell RNA-seq (scRNA-seq) reveals cellular heterogeneity, while bulk RNA-seq remains essential for <strong>large clinical cohorts with outcomes</strong>. Deconvolution is the bridge—but cancer is uniquely hard: tumor plasticity and extreme intra-tumor heterogeneity can break assumptions that work in normal tissues.</p>
<p>This Community News post shares an interview-style Q&amp;A with the authors on what the review contributes, what’s still missing, and where the field is heading.</p>
</section>
<section id="interview-style-qa" class="level2">
<h2 class="anchored" data-anchor-id="interview-style-qa">Interview-style Q&amp;A</h2>
<section id="background-significance" class="level3">
<h3 class="anchored" data-anchor-id="background-significance">1) Background &amp; significance</h3>
<p><strong>Q:</strong> Regarding the background and significance of this review, what major themes, unresolved questions, or emerging directions in the field does this review summarize or synthesize?</p>
<p><strong>A:</strong> The review synthesizes <strong>three interconnected themes</strong> that reshape cancer transcriptomics:</p>
<ol type="1">
<li><strong>Bridging single-cell and bulk RNA-seq</strong>: scRNA-seq excels at resolving heterogeneity, but bulk RNA-seq remains indispensable for large-scale clinical studies with outcome data.<br>
</li>
<li><strong>Cancer-specific computational challenges</strong>: tumor plasticity and profound heterogeneity often violate assumptions behind tools developed for healthy tissues.<br>
</li>
<li><strong>From methods to clinical impact</strong>: deconvolution enables tumor subtyping, treatment response prediction, and biomarker discovery.</li>
</ol>
<p>The major unresolved questions center on the <strong>“missing reference” problem</strong>—how to create profiles that capture <em>dynamic tumor cell states</em> rather than assuming stable expression patterns. The review also highlights critical benchmarking gaps: many validations use peripheral blood or cell lines rather than tumor tissues, and matched bulk+single-cell from identical samples remains rare and technically challenging.</p>
<p>Emerging directions include <strong>FFPE-ready deconvolution</strong>, <strong>temporal models during treatment</strong>, <strong>multi-modal integration</strong> (e.g., copy number, methylation), and extensions to <strong>spatial transcriptomics</strong> to understand not only what cell types are present but <em>where</em> they are and how they interact within tumor architecture.</p>
</section>
<section id="what-reviewers-and-peers-valued" class="level3">
<h3 class="anchored" data-anchor-id="what-reviewers-and-peers-valued">2) What reviewers and peers valued</h3>
<p><strong>Q:</strong> How did peers or experts evaluate (or praise) the value of this review?</p>
<p><strong>A:</strong> Reviewers valued the review’s practicality and transparency. They highlighted the <strong>comprehensive catalog of 43 deconvolution methods</strong>, the explicit <strong>applicability classifications</strong>, and the <strong>decision-tree framework (Figure 4)</strong> that turns a complex landscape into actionable guidance for method selection.</p>
<p>They also emphasized the review’s <strong>cancer-specific focus</strong>: instead of relying mainly on blood/cell-line mixtures for validation, the review centers the biological realities of tumor tissues—plasticity, microenvironment complexity, and reference mismatch. Finally, they appreciated the review’s clear reporting of limitations and the distinction between methods with <strong>rigorous cancer-specific benchmarking</strong> and those that claim applicability without strong validation.</p>
</section>
<section id="how-this-may-shape-research-and-clinical-practice" class="level3">
<h3 class="anchored" data-anchor-id="how-this-may-shape-research-and-clinical-practice">3) How this may shape research and clinical practice</h3>
<p><strong>Q:</strong> If these perspectives have potential applications, what are specific ways they may shape research or clinical practice in the next few years?</p>
<p><strong>A:</strong> In the near term, the framework enables researchers to re-analyze large bulk RNA-seq cohorts (e.g., TCGA-like datasets) to estimate tumor microenvironment composition and tumor-specific signals—potentially discovering biomarkers without generating new data. It also provides a roadmap for method developers by pinpointing gaps in <strong>FFPE optimization</strong>, <strong>temporal modeling</strong>, and <strong>rare cell detection</strong>.</p>
<p>Over the next <strong>3–5 years</strong>, deconvolution-derived metrics (tumor-specific mRNA abundance, immune proportions) could become validated prognostic markers, supporting immunotherapy response prediction and more accurate molecular subtyping—<em>if</em> validation standards and tumor benchmarking mature.</p>
</section>
<section id="how-the-review-was-built" class="level3">
<h3 class="anchored" data-anchor-id="how-the-review-was-built">4) How the review was built</h3>
<p><strong>Q:</strong> Can you describe the stages involved in developing this review?</p>
<p><strong>A:</strong> The review emerged from a practical challenge the team repeatedly saw in collaborations with experimental biologists: cancer researchers needed clear guidance on method choice, and tools developed for normal tissues often failed when applied to tumors. That motivated a cancer-specific guide rather than a general methods review.</p>
<p>The most intensive phase was literature curation: systematically identifying <strong>43 relevant methods</strong>, setting explicit inclusion/exclusion criteria, and documenting decisions transparently in supplementary materials. The conceptual framework and figures then went through multiple iterations, with a constant usability test: could a cancer researcher without deep computational training understand the logic and apply it? Reviewer feedback further strengthened the cancer-specific emphasis and helped refine clinical examples and presentation details to match journal style requirements.</p>
</section>
<section id="memorable-turning-points" class="level3">
<h3 class="anchored" data-anchor-id="memorable-turning-points">5) Memorable turning points</h3>
<p><strong>Q:</strong> Were there any memorable events or key insights during writing?</p>
<p><strong>A:</strong> A major turning point was abandoning “best method” rankings. Performance depends strongly on context—available reference data, target cell types, and study aims—so ranking tables quickly became misleading. Shifting to <strong>decision trees</strong> was more honest and ultimately more useful.</p>
<p>The team also chose transparency even when it added work (e.g., documenting excluded methods), and was struck by how few clinical trials use deconvolution beyond exploratory analyses—highlighting a translation gap between computational capabilities and routine clinical application.</p>
</section>
<section id="whats-next" class="level3">
<h3 class="anchored" data-anchor-id="whats-next">6) What’s next</h3>
<p><strong>Q:</strong> Are there follow-up plans based on this review?</p>
<p><strong>A:</strong> The team is developing <strong>practical tutorials</strong> on reference construction, interpretation, and pitfalls; collaborating to generate matched bulk+single-cell datasets for improved benchmarking; and advancing work in <strong>spatial transcriptomic deconvolution</strong> (including ongoing efforts such as <em>DeMixNB</em>, available as a preprint).</p>
</section>
<section id="where-biostatistics-fits-in-the-ai-era" class="level3">
<h3 class="anchored" data-anchor-id="where-biostatistics-fits-in-the-ai-era">7) Where biostatistics fits in the AI era</h3>
<p><strong>Q:</strong> From the perspective of biostatistics, how can biostatistics contribute to AI development and evaluation in this area?</p>
<p><strong>A:</strong> Biostatistics brings essential rigor: validation designs that reflect real-world performance (not just simulated mixtures), generalization assessment across cancer types, and uncertainty quantification needed for clinical decisions. It also helps identify and control pitfalls like batch effects, biased training datasets, and mismatched reference profiles that can mislead downstream AI models.</p>
</section>
<section id="final-takeaway" class="level3">
<h3 class="anchored" data-anchor-id="final-takeaway">8) Final takeaway</h3>
<p><strong>Q:</strong> Is there anything else you would like to add?</p>
<p><strong>A:</strong> The review is organized around <strong>biological questions cancer researchers actually face</strong>, not only computational categories—making it more actionable for experimentalists. It discusses limitations openly (rare populations, highly plastic tumor cells, FFPE constraints) to help avoid misapplication and build realistic expectations.</p>
<p>The central message is that the biggest barrier is often <strong>translation</strong>, not algorithmic sophistication: method selection remains difficult, validation standards are inconsistent, and pathways to clinical utility are unclear. Progress will require not just better algorithms, but better benchmarks and better communication across computational and experimental communities.</p>
</section>
</section>
<section id="photo" class="level2">
<h2 class="anchored" data-anchor-id="photo">Photo</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="wang-dai.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-cap="Dr. Wenyi Wang (left) and Yaoyi Dai (right)" alt="Dr. Wenyi Wang (left) and Yaoyi Dai (right)"></p>
</figure>
</div>
</section>
<section id="author-biographies" class="level2">
<h2 class="anchored" data-anchor-id="author-biographies">Author biographies</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Yaoyi Dai</strong><br>
Graduate research assistant in the Department of Bioinformatics and Computational Biology at MD Anderson Cancer Center and PhD candidate at Baylor College of Medicine. Research focuses on transcriptomic deconvolution for cancer genomics, integrating multi-omics for biomarker discovery and tumor microenvironment characterization.</p>
<p><strong>Shuai Guo</strong><br>
Postdoctoral fellow at Emory University. Trained with Dr.&nbsp;Wenyi Wang at MD Anderson; focuses on single-cell reference-based deconvolution and benchmarking frameworks that address platform-specific biases when integrating single-cell and bulk RNA-seq.</p>
<p><strong>Yidan Pan</strong><br>
Data Scientist in the Department of Genetics at MD Anderson Cancer Center (Van Loo lab). Interests include tumor evolution and spatiotemporal single-cell analyses in malignant peripheral nerve sheath tumors (MPNST).</p>
</div><div class="column" style="width:50%;">
<p><strong>Carla Castignani</strong><br>
Graduate Research Assistant at the Francis Crick Institute (London), PhD student with Dr.&nbsp;Peter Van Loo. Focus: reference-free deconvolution methods and applications to complex cancer genomics datasets.</p>
<p><strong>Matthew D. Montierth</strong><br>
Data Scientist in Bioinformatics and Computational Biology at MD Anderson (Wang lab). Focus: semi-reference-based deconvolution, subclonal reconstruction, and statistical models of tumor heterogeneity.</p>
<p><strong>Peter Van Loo</strong><br>
Professor and CPRIT Scholar at UT MD Anderson; research on cancer genome evolution, copy-number alterations, and tumor phylogenies; leadership roles in PCAWG and the 100,000 Genomes Project (Sarcoma arm).</p>
<p><strong>Wenyi Wang</strong><br>
Professor of Bioinformatics &amp; Computational Biology and Biostatistics at UT MD Anderson. Contributions include MuSE, DeMixT, Famdenovo, and pan-cancer analyses of intra-tumor heterogeneity and subclonal selection.</p>
</div>
</div>
</section>
<section id="how-to-cite-fill-in" class="level2">
<h2 class="anchored" data-anchor-id="how-to-cite-fill-in">How to cite (fill in)</h2>
<p>Add the paper’s DOI / journal link / preprint here.</p>
</section>
<section id="share" class="level2">
<h2 class="anchored" data-anchor-id="share">Share</h2>
<p>If you’re working on related problems (benchmarking, FFPE, spatial, multimodal), reply in the StatsUpAI community and we can help connect collaborators.</p>


</section>

</main> <!-- /main -->
<!-- GoatCounter Tracker -->
<script data-goatcounter="https://statsupai.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>

<!-- Per-Page View Counter (Footer Style) -->
<style>
/*#goatcounter-footer {*/
/*  display: flex; */
/*  justify-content: left;*/
/*  column-gap: 5px;*/
/*  color: #8E8E8E; */
/*  font-size: 13px; */
/*  font-family: Arial, sans-serif;*/
/*}*/
/*#goatcounter-footer .statcounter {*/
/*  font-family: 'Courier New', monospace; */
/*  color: #0033cc; */
/*  font-weight: bold; */
/*  margin-left: 3px; */
/*}*/

#goatcounter-footer {
  display: flex; 
  align-items: center; 
  column-gap: 5px;
  color: #8E8E8E; 
  font-size: 13px; 
  font-family: Arial, sans-serif;
}
#goatcounter-footer .statcounter {
  font-family: 'Courier New', monospace; 
  color: #0033cc; 
  font-weight: bold; 
  margin-left: 3px; 
}
</style>

<!-- GoatCounter Tracker -->
<div id="goatcounter-footer"><span style="margin-left: 3px;">Loading views...</span></div>
<script>
    const path = window.location.pathname;
    console.log('window.location.pathname:', path);
    // If at the root, skip fetching views for now
    if (path.endsWith('index.html') || path.endsWith('/posts/')) {
      
      const display = document.getElementById("goatcounter-footer");
      if (display) {
        display.innerHTML = "";
        console.log("Skipping views for root path:", path);
      }
      
    } else {
      
      // Trim path to remove everything before /quarto_web/site/ for easier local testing
      var trimmedPath = path.replace(/^.*\/posts\//, '\/quarto_web\/site\/posts\/');
      // If the path is exactly /posts/, set trimmedPath to the index.html file
      if (path === '\/posts\/') {
          console.log('Path is exactly /posts/, setting trimmedPath to index.html');
          trimmedPath = '/quarto_web/site/posts/index.html';
      }
      console.log('trimmedPath:', trimmedPath);
      
      // setInterval to check every 100ms because GoatCounter may not be available immediately
      var t = setInterval(function() {
          console.log('Checking for GoatCounter availability...window.goatcounter:', window.goatcounter);
          // Check if GoatCounter is available
          if (window.goatcounter && window.goatcounter.visit_count) {

              // GoatCounter is available, clear the timer
              clearInterval(t)
              // Update the display with the current visit count
              const display = document.getElementById("goatcounter-footer");
              if (display) {
                display.innerHTML = '<span">Page Views: </span>';
                console.log('display.innerHTML:', display.innerHTML);
              }
              
              
              goatcounter.visit_count({
                no_branding: true,
                path: trimmedPath,
                append: '#goatcounter-footer', 
                style: `
                  div { 
                    border-width: 0px;
                    display: flex;
                  }
                  #gcvc-for {
                    font-size: 0px;
                  }
                  #gcvc-views { 
                      font-family: 'Courier New', monospace; 
                      font-size: 13px;
                      color: #0033cc; 
                      font-weight: bold; 
                      margin-top: 29px;
                  }`
              })

          }
      }, 100)
      
    }
</script>






<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>