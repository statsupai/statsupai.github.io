<!-- GoatCounter Tracker -->
<div id="goatcounter-footer">Loading views...</div>
<script>
  // const path = window.location.pathname;
  // fetch(`https://statsupai.goatcounter.com/api/v0/count${path}`)
  //   .then(res => res.ok ? res.json() : Promise.reject())
  //   .then(data => {
  //     const display = document.getElementById("goatcounter-footer");
  //     if (display) {
  //       display.innerHTML = `<span style="font-family: 'Courier New', monospace; color: #0033cc;">Views: ${data.count}</span>`;
  //     }
  //   })
  //   .catch(() => {
  //     const display = document.getElementById("goatcounter-footer");
  //     if (display) display.innerHTML = "Page views not availale for now.";  // hide on failure
  //   });
</script>
<script>
    const path = window.location.pathname
    // Trim path to remove everything before /quarto_web/site/ for easier local testing
    const trimmedPath = path.replace(/^.*\/posts\//, '\/quarto_web\/site\/posts\/');
    console.log('trimmedPath:', trimmedPath);
    // setInterval to check every 100ms because GoatCounter may not be available immediately
    var t = setInterval(function() {
        console.log('Checking for GoatCounter availability...window.goatcounter:', window.goatcounter);
        // Check if GoatCounter is available
        if (window.goatcounter && window.goatcounter.visit_count) {
            // GoatCounter is available, clear the timer
            clearInterval(t)
            // Update the display with the current visit count
            const display = document.getElementById("goatcounter-footer");
            const urlPath = `https://statsupai.goatcounter.com/counter/${encodeURIComponent(trimmedPath)}.html?no_branding=1`;
            if (display) {
              display.innerHTML = '<iframe src="' + urlPath + '" ></iframe>';
              console.log('display.innerHTML:', display.innerHTML);
            }
        }
    }, 100)
</script>



<script data-goatcounter="https://statsupai.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>


